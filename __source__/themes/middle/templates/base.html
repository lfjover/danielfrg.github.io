<!DOCTYPE html>
<html lang="en" ng-app="app">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="{{ AUTHOR }}">
        <meta name="description" content="{% block description %}{%endblock%}">
        <meta name="viewport" content="width=device-width">
        <title>{% block title %}{%endblock%} | {{ SITENAME }}</title>

        <link rel="alternate" type="application/atom+xml" title="{{SITENAME}} blog atom feed" href="/feeds/all.atom.xml" />
        <link rel="stylesheet" href="/theme/css/normalize.min.css">
        <link rel="stylesheet" href="/theme/css/fonts/proximanova.css">
        <link rel="stylesheet" href="/theme/css/fonts/ss-social.css">
        <link rel="stylesheet" href="/theme/css/fonts/ss-standard.css">
        <link rel="stylesheet" href="/theme/css/pygments.css">
        <link rel="stylesheet" href="/theme/css/main.css">

        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
    </head>

    <body ng-controller="MainCtrl">
        <div class="header">
            <div class="navbar">
                <a href="/" class="ss-icon" title="home">home</a>
                <a href="/tags.html" class="ss-icon" title="tags">tag</a>
                {% if ABOUTME_USERNAME is defined %}
                    <a href="http://about.me/{{ABOUTME_USERNAME}}" class="ss-icon" title="about">user</a>
                {% endif %}

                {% if TWITTER_USERNAME is defined %}
                    <a href="http://twitter.com/{{TWITTER_USERNAME}}" class="ss-icon ss-social" title="on twitter">twitter</a>
                {% endif %}

                {% if GITHUB_USERNAME is defined %}
                <a href="http://github.com/{{GITHUB_USERNAME}}" class="ss-icon ss-social" title="on github">octocat</a>
                {% endif %}

                {% if SHOW_FEED %}
                <a href="/feeds/all.atom.xml" class="ss-icon ss-social" title="rss feed">rss</a>
                {% endif %}

                {% if EMAIL_ADDRESS is defined %}
                <a href="mailto:{{EMAIL_ADDRESS}}" class="ss-icon" title="email me">mail</a>
                {% endif %}
            </div>
        </div>

        <div id="content">
            {% block content %}{% endblock %}
        </div>

        <footer>
            {% block footer %}{% endblock %}
        </footer>

        <script src="/theme/js/ngProgress.js"></script>
        <script>
            var app = angular.module('app', ['ngProgress']);

            app.config(function(ngProgressProvider){
                ngProgressProvider.setColor('black');
                ngProgressProvider.setHeight('2px');
            });

            /*
            app.directive("scroll", function ($window) {
                return function(scope, element, attrs) {
                    angular.element($window).bind("scroll", function() {
                        var body = document.body;
                        var html = document.documentElement;

                        var height = Math.max(body.scrollHeight, body.offsetHeight,
                                              html.clientHeight, html.scrollHeight, html.offsetHeight);
                        // scope.updateProgress(this.scrollY / this.window.height);
                        scope.updateProgress(this.scrollY / height);
                        scope.$apply();
                    });
                };
            });
            */

            var MainCtrl = function($scope, $timeout, ngProgress) {
                ngProgress.start();
                $timeout(function(){
                    ngProgress.complete();
                    // ngProgress.set(0);
                }, 2000);

                $scope.updateProgress = function(percent) {
                    ngProgress.set(percent * 100);
                }
            }

        </script>
        {% include 'analytics.html' %}
    </body>
</html>
