<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Daniel Rodriguez">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Python Finance Package v0.01 - Data Manager | Daniel Rodriguez</title>

        <link rel="alternate" type="application/atom+xml" title="Daniel Rodriguez blog atom feed" href="/feeds/all.atom.xml" />
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
        <link rel="stylesheet" href="/theme/css/pygments.css">
        <link rel="stylesheet" href="/theme/css/main.css">

    </head>

    <body>
        <header class="main-header" style="background: url('/images/forest.jpg') no-repeat center center #DDD; background-size: 100%;">
        <nav>
            <div class="container">
            <ul>
                <li><a href="/" title="Home">Home</a></li>
                <!-- <li><a href="/about.html" title="More information about this site">About</a></li> -->
                    <li><a href="http://github.com/danielfrg" title="danielfrg's Github" rel="me">Github</a></li>
                    <li><a href="http://twitter.com/danielfrg" title="danielfrg Twitter" rel="me">Twitter</a></li>
                    <li><a href="/archives.html" title="Archive">Archives</a></li>
                    <li><a href="/feeds/all.atom.xml" title="danielfrg.github.io RSS feed" rel="me">RSS</a></li>
            </ul>
            </div>
        </nav>
        </header>

<div class="container post">

    <article>
        <header>
            <h1>Python Finance Package v0.01 - Data Manager</h1>
            <time datetime="article.date.isoformat()" pubdate>December 13, 2012</time>
        </header>

        <div class="article_content">
            <p>I have learned a lot from my most recent Coursera Course: <a href="https://class.coursera.org/compinvesting1-2012-001/class/index" title="Computational Investing - Part 1">Computational
Investing Part 1</a>. The language used on the class is Python so I
couldn't be happier; we are using a package called <a href="http://wiki.quantsoftware.org/index.php?title=QuantSoftware_ToolKit" title="QSTK">QSTK</a>developed by
some people at Georgia Tech, how also is responsible for the class.</p>
<p>The quality of the package is amazing, has a tons of features, but one
area I notice the package to has to be improved is the data downloading
and management.</p>
<p>I decide to write some python scripts to help me with this problem, and
later on I decide to write a very simple Python Package with a few utils
to help me on this class and future finance projects. A little bit an
alternative to QSTK and a little bit a complement for it.</p>
<p>At the same time I decide to make the jump from Python 2.7 to Python
3.2, this makes QSTK useless for now. The transition from 2.7 to 3.2 was
very smooth, I still write <code>print var</code> instead of <code>print(var)</code> a <strong>lot</strong>
of times but is a minor issue.</p>
<p>For now the package only has the Data Management part but yesterday I
finished my final exams so I have a little bit of time to work on this.</p>
<h2>How it works</h2>
<p>You tell the symbol/symbols, dates  and the fields (columns) you want
from the stocks. The package automatically downloads the information
from Yahoo! Finance and loads the information into a Pandas DataFrame.
Before downloading the package checks if the information is already
downloaded looking into already downloaded information, and
optional (default True) saves a pickled version of the DataFrame to load
faster the next time.</p>
<h2>Example</h2>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">finance.data</span> <span class="kn">import</span> <span class="n">DataAccess</span>

<span class="n">da</span> <span class="o">=</span> <span class="n">DataAccess</span><span class="p">(</span><span class="s">&quot;./data/&quot;</span><span class="p">)</span>
<span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s">&quot;GLD&quot;</span><span class="p">,</span> <span class="s">&quot;GOOG&quot;</span><span class="p">,</span> <span class="s">&quot;SPY&quot;</span><span class="p">,</span> <span class="s">&quot;XOM&quot;</span><span class="p">]</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">fields</span> <span class="o">=</span> <span class="s">&quot;Close&quot;</span>

<span class="n">close</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span>
<span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">close</span><span class="p">)</span>
</pre></div>


<h3>Little Benchmark</h3>
<p>Just using <code>clock()</code> and <code>time()</code> to see if it was worth it. It is.</p>
<div class="highlight"><pre><span class="n">Directory</span> <span class="n">empty</span><span class="o">:</span> <span class="n">Download</span> <span class="n">and</span> <span class="n">save</span> <span class="mi">5</span> <span class="n">stocks</span>
    <span class="mf">1.4336301090943933</span> <span class="mf">1.434000015258789</span>
<span class="n">Load</span> <span class="mi">5</span> <span class="n">stocks</span> <span class="n">from</span> <span class="p">.</span><span class="n">csv</span>
    <span class="mf">0.023402424167761726</span> <span class="mf">0.023000001907348633</span>
<span class="n">Load</span> <span class="mi">5</span> <span class="n">stocks</span> <span class="n">from</span> <span class="n">serialized</span>
    <span class="mf">0.0007370202310554852</span> <span class="mf">0.0009999275207519531</span>
</pre></div>


<h2>Where to find the code</h2>
<p>On github: <a href="https://github.com/danielfrg/PythonFinance" title="PythonFinance">PythonFinance</a>. This is such a small package is necessary
to manually download it and put it on a folder where you have other
python packages.</p>
<p>I use sublime text so I have this on my <code>Python.sublime-build</code> file:</p>
<div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;env&quot;</span><span class="o">:</span>
    <span class="p">{</span>
        <span class="s">&quot;PYTHONPATH&quot;</span><span class="o">:</span><span class="s">&quot;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Daniel</span><span class="se">\\</span><span class="s">Documents</span><span class="se">\\</span><span class="s">projects</span><span class="se">\\</span><span class="s">packages&quot;</span>
    <span class="p">},</span>
    <span class="s">&quot;cmd&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;pythonw&quot;</span><span class="p">,</span> <span class="s">&quot;-u&quot;</span><span class="p">,</span> <span class="s">&quot;$file&quot;</span><span class="p">],</span>
    <span class="s">&quot;file_regex&quot;</span><span class="o">:</span> <span class="s">&quot;^[ ]*File </span><span class="se">\&quot;</span><span class="s">(...*?)</span><span class="se">\&quot;</span><span class="s">, line ([0-9]*)&quot;</span><span class="p">,</span>
    <span class="s">&quot;selector&quot;</span><span class="o">:</span> <span class="s">&quot;source.python&quot;</span>
<span class="p">}</span>
</pre></div>
        </div>

        <div class="meta">
            <div>
                    <a href="/tag/coursera.html" class="tag">coursera</a>
                    <a href="/tag/finance.html" class="tag">finance</a>
                    <a href="/tag/pandas.html" class="tag">pandas</a>
                    <a href="/tag/python.html" class="tag">python</a>
                    <a href="/tag/computational-investing.html" class="tag">computational investing</a>
            </div>
            <div>
                <a id="comments-button" class="comments_btn" href="#disqus_thread">Show comments</a>
            </div>
        </div>
    </article>
</div>

<script type="text/javascript">
(function () {
    'use strict';

    // Global object
    var App = {};

    // Create button
    App.commentsButton = document.getElementById('comments-button');

    App.commentsButton.onclick = function () {
        // Remove button action on click
        App.commentsButton.onclick = function () {
        }

        // Create comments container
        App.disqusContainer = document.createElement('div');
        App.disqusContainer.setAttribute('id', 'disqus_thread');
        // App.disqusContainer.setAttribute('class', 'container');

        // Append container to body or div
        // document.body.appendChild( App.disqusContainer );
        var container = document.getElementsByClassName('container post')[0];
        container.appendChild(App.disqusContainer);

        // Your Disqus shortname
        App.disqus_shortname = 'danielfrg';

        // Embed Disqus
        var dsq = document.createElement('script');

        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + App.disqus_shortname + '.disqus.com/embed.js';

        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

        window.scrollTo(0, dsq.offsetTop - 200);
    };
})();
</script>

</div>


<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35523657-2']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

    </body>
</html>