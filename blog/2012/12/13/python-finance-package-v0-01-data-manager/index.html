<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="Daniel Rodriguez">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>Python Finance Package v0.01 - Data Manager | Daniel Rodriguez</title>

        <link rel="alternate" type="application/atom+xml" title="Daniel Rodriguez blog atom feed" href="/feeds/all.atom.xml" />
        <link rel="stylesheet" href="/theme/css/normalize.min.css">
        <link rel="stylesheet" href="/theme/css/fonts/proximanova.css">
        <link rel="stylesheet" href="/theme/css/fonts/ss-social.css">
        <link rel="stylesheet" href="/theme/css/fonts/ss-standard.css">
        <link rel="stylesheet" href="/theme/css/pygments.css">
        <link rel="stylesheet" href="/theme/css/main.css">

    </head>

    <body>
        <div class="header">
            <div class="navbar">
                <a href="/" class="ss-icon" title="home">home</a>
                <a href="/tags.html" class="ss-icon" title="tags">tag</a>

                    <a href="http://twitter.com/danielfrg" class="ss-icon ss-social" title="on twitter">twitter</a>

                <a href="http://github.com/danielfrg" class="ss-icon ss-social" title="on github">octocat</a>

                <a href="/feeds/all.atom.xml" class="ss-icon ss-social" title="rss feed">rss</a>

                <a href="mailto:df.rodriguez143@gmail.com" class="ss-icon" title="email me">mail</a>
            </div>
        </div>

        <div id="content">

<div class="post">
    <article>
        <header>
            <h1>Python Finance Package v0.01 - Data Manager</h1>
        </header>
        <div class='post-content'>
            <p>I have learned a lot from my most recent Coursera Course: <a href="https://class.coursera.org/compinvesting1-2012-001/class/index" title="Computational Investing - Part 1">Computational
Investing Part 1</a>. The language used on the class is Python so I
couldn't be happier; we are using a package called <a href="http://wiki.quantsoftware.org/index.php?title=QuantSoftware_ToolKit" title="QSTK">QSTK</a>developed by
some people at Georgia Tech, how also is responsible for the class.</p>
<p>The quality of the package is amazing, has a tons of features, but one
area I notice the package to has to be improved is the data downloading
and management.</p>
<p>I decide to write some python scripts to help me with this problem, and
later on I decide to write a very simple Python Package with a few utils
to help me on this class and future finance projects. A little bit an
alternative to QSTK and a little bit a complement for it.</p>
<p>At the same time I decide to make the jump from Python 2.7 to Python
3.2, this makes QSTK useless for now. The transition from 2.7 to 3.2 was
very smooth, I still write <code>print var</code> instead of <code>print(var)</code> a <strong>lot</strong>
of times but is a minor issue.</p>
<p>For now the package only has the Data Management part but yesterday I
finished my final exams so I have a little bit of time to work on this.</p>
<h2>How it works</h2>
<p>You tell the symbol/symbols, dates  and the fields (columns) you want
from the stocks. The package automatically downloads the information
from Yahoo! Finance and loads the information into a Pandas DataFrame.
Before downloading the package checks if the information is already
downloaded looking into already downloaded information, and
optional (default True) saves a pickled version of the DataFrame to load
faster the next time.</p>
<h2>Example</h2>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">finance.data</span> <span class="kn">import</span> <span class="n">DataAccess</span>

<span class="n">da</span> <span class="o">=</span> <span class="n">DataAccess</span><span class="p">(</span><span class="s">&quot;./data/&quot;</span><span class="p">)</span>
<span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s">&quot;GLD&quot;</span><span class="p">,</span> <span class="s">&quot;GOOG&quot;</span><span class="p">,</span> <span class="s">&quot;SPY&quot;</span><span class="p">,</span> <span class="s">&quot;XOM&quot;</span><span class="p">]</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
<span class="n">fields</span> <span class="o">=</span> <span class="s">&quot;Close&quot;</span>

<span class="n">close</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span>
<span class="n">save</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">close</span><span class="p">)</span>
</pre></div>


<h3>Little Benchmark</h3>
<p>Just using <code>clock()</code> and <code>time()</code> to see if it was worth it. It is.</p>
<div class="highlight"><pre><span class="n">Directory</span> <span class="n">empty</span><span class="o">:</span> <span class="n">Download</span> <span class="n">and</span> <span class="n">save</span> <span class="mi">5</span> <span class="n">stocks</span>
    <span class="mf">1.4336301090943933</span> <span class="mf">1.434000015258789</span>
<span class="n">Load</span> <span class="mi">5</span> <span class="n">stocks</span> <span class="n">from</span> <span class="p">.</span><span class="n">csv</span>
    <span class="mf">0.023402424167761726</span> <span class="mf">0.023000001907348633</span>
<span class="n">Load</span> <span class="mi">5</span> <span class="n">stocks</span> <span class="n">from</span> <span class="n">serialized</span>
    <span class="mf">0.0007370202310554852</span> <span class="mf">0.0009999275207519531</span>
</pre></div>


<h2>Where to find the code</h2>
<p>On github: <a href="https://github.com/danielfrg/PythonFinance" title="PythonFinance">PythonFinance</a>. This is such a small package is necessary
to manually download it and put it on a folder where you have other
python packages.</p>
<p>I use sublime text so I have this on my <code>Python.sublime-build</code> file:</p>
<div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;env&quot;</span><span class="o">:</span>
    <span class="p">{</span>
        <span class="s">&quot;PYTHONPATH&quot;</span><span class="o">:</span><span class="s">&quot;C:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">Daniel</span><span class="se">\\</span><span class="s">Documents</span><span class="se">\\</span><span class="s">projects</span><span class="se">\\</span><span class="s">packages&quot;</span>
    <span class="p">},</span>
    <span class="s">&quot;cmd&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;pythonw&quot;</span><span class="p">,</span> <span class="s">&quot;-u&quot;</span><span class="p">,</span> <span class="s">&quot;$file&quot;</span><span class="p">],</span>
    <span class="s">&quot;file_regex&quot;</span><span class="o">:</span> <span class="s">&quot;^[ ]*File </span><span class="se">\&quot;</span><span class="s">(...*?)</span><span class="se">\&quot;</span><span class="s">, line ([0-9]*)&quot;</span><span class="p">,</span>
    <span class="s">&quot;selector&quot;</span><span class="o">:</span> <span class="s">&quot;source.python&quot;</span>
<span class="p">}</span>
</pre></div>
        </div>
    </article>

    <div class="metadata">
        <ul>
            <li>
                <strong>Published:</strong>
                <i><time datetime="2012-12-13T12:59:00">13.12.2012</time></i>
            </li>
            <li>
                <strong>Tags:</strong>
<a href="/tag/coursera.html">coursera</a>
<a href="/tag/finance.html">finance</a>
<a href="/tag/pandas.html">pandas</a>
<a href="/tag/python.html">python</a>
<a href="/tag/computational-investing.html">computational investing</a>
            </li>
        </ul>
    </div>
</div>
        </div>

        <footer>
    <div class="post social container">

        <div class="span4">
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="danielfrg">Tweet</a>
        </div>

        <div class="span4">
            <div class="g-plusone" data-size="medium" data-annotation="bubble"></div>
        </div>

        <div class="span4 hn">
            <span id="hnews"></span>
        </div>
    </div>

    <div id="disqus_thread" class="comments container"></div>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'danielfrg'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


<script src="/theme/js/social.js"></script>
        </footer>


<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-35523657-2']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

    </body>
</html>